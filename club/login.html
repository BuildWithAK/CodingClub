<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Coding Club</title>
  <link rel="stylesheet" href="assets/style.css">

  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <header>
    <nav>
      <ul id="nav-menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="lectures.html">Online Lectures</a></li>
        <li><a href="notes.html">Notes</a></li>
        <li><a href="tasks.html">Daily Tasks</a></li>
        <li><a href="tests.html">Weekly Tests</a></li>
        <li><a href="dashboard.html">Student Dashboard</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="login center-items">
      <h2>Login to Coding Club</h2>
      <form id="login-form">
        <div class="form-group">
          <input type="text" name="fullName" placeholder="Full Name" required>
        </div>
        <div class="form-group">
          <input type="email" name="email" placeholder="Email Address" required>
        </div>
        <div class="form-group">
          <input type="text" name="college" placeholder="College Name" required>
        </div>
        <div class="form-group">
          <select name="year" required>
            <option value="">Select Year of Study</option>
            <option value="1">1st Year</option>
            <option value="2">2nd Year</option>
            <option value="3">3rd Year</option>
            <option value="4">4th Year</option>
          </select>
        </div>
        <div class="form-group">
          <input type="text" name="username" placeholder="Username" required>
        </div>
        <div class="form-group">
          <input type="password" name="password" placeholder="Password" required>
          <small class="password-hint">
            Password must contain at least one capital letter, one number, and one special character
          </small>
        </div>
        <button type="submit" class="submit-btn">Create Account</button>
      </form>

      <div style="margin: 1.5em 0; text-align: center;">
        <span>or</span>
      </div>

      <!-- Google Sign-In -->
      <div id="g_id_onload"
           data-client_id="509204281095-2ivj0ljgi1eg3erh2d4vemkkbgdthg7s.apps.googleusercontent.com"
           data-context="signup"
           data-callback="handleGoogleResponse"
           data-auto_prompt="false">
      </div>

      <div class="g_id_signin"
           data-type="standard"
           data-shape="rectangular"
           data-theme="outline"
           data-text="signup_with"
           data-size="large"
           data-logo_alignment="left">
      </div>

      <div id="login-success" style="display:none; color:green; margin-top:1em;">
        Login successful! Redirecting...
      </div>
      <div id="login-error" style="display:none; color:red; margin-top:1em;">
        Invalid username or password.
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-links">
      <a href="#">Privacy Policy</a>
      <a href="#">Facebook</a>
      <a href="#">Twitter</a>
      <a href="#">Instagram</a>
    </div>
    <p>&copy; 2025 Coding Club. All rights reserved.</p>
  </footer>

  <script>
    // Normal form login validation
    document.getElementById('login-form').addEventListener('submit', function(e) {
      e.preventDefault();

      const username = this.username.value.trim();
      const password = this.password.value.trim();

      const passwordPattern = /^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/;

      if (!username || !password) {
        showError("All fields are required!");
        return;
      }

      if (!passwordPattern.test(password)) {
        showError("Password must contain at least one capital letter, one number, and one special character");
        return;
      }

      // Dummy authentication (replace with real backend check)
      if (username === "admin" && password === "Admin@123") {
        showSuccess();
      } else {
        showError("Invalid username or password.");
      }
    });

    // Google Sign-In callback
    function handleGoogleResponse(response) {
      const jwt = response.credential;
      console.log("Google JWT Token:", jwt);

      // You can send JWT to backend for verification
      showSuccess("Google login successful!");
    }

    // Utility functions
    function showError(message) {
      const errorDiv = document.getElementById('login-error');
      errorDiv.style.display = 'block';
      errorDiv.textContent = message;

      const successDiv = document.getElementById('login-success');
      successDiv.style.display = 'none';
    }

    function showSuccess(message = "Login successful! Redirecting...") {
      const successDiv = document.getElementById('login-success');
      successDiv.style.display = 'block';
      successDiv.textContent = message;

      const errorDiv = document.getElementById('login-error');
      errorDiv.style.display = 'none';

      setTimeout(() => {
        window.location.href = "dashboard.html";
      }, 2000);
    }
  </script>
</body>
</html>
